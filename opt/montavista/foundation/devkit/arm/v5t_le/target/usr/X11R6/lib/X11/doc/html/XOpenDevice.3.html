
<!--
  
   $XFree86: xc/doc/man/Xi/XOpenDev.man,v 1.2 2001/01/27 18:20:21 dawes Exp $
   
   
   Copyright ([\d,\s]*) by Hewlett-Packard Company, Ardent Computer, 
   
   Permission to use, copy, modify, distribute, and sell this documentation 
   for any purpose and without fee is hereby granted, provided that the above
   copyright notice and this permission notice appear in all copies.
   Ardent, and Hewlett-Packard make no representations about the 
   suitability for any purpose of the information in this document.  It is 
   provided \`\`as is'' without express or implied warranty.
   
   $Xorg: XOpenDev.man,v 1.3 2000/08/17 19:41:56 cpqbld Exp $
 
-->
<!-- manual page source format generated by PolyglotMan v3.0.8+X.Org, -->
<!-- available at http://polyglotman.sourceforge.net/ -->

<html>
<head>
<title>XOpenDevice(3X11) manual page</title>
</head>
<body bgcolor='#efefef' text='black' link='blue' vlink='#551A8B' alink='red'>
<a href='#toc'>Table of Contents</a><p>

<h2><a name='sect0' href='#toc0'>Name</a></h2>
XOpenDevice, XCloseDevice - open or close an extension
input device 
<h2><a name='sect1' href='#toc1'>Syntax</a></h2>

<dl>

<dt>XDevice *XOpenDevice(Display *<i>display</i>, XID <i>device_id</i>);
 </dt>
<dd></dd>

<dt>XCloseDevice(Display *<i>display</i>, XDevice *<i>device</i>);  </dt>
<dd></pre> </dd>
</dl>

<h2><a name='sect2' href='#toc2'>Arguments</a></h2>

<dl>

<dt><i>display</i> </dt>
<dd>Specifies
the connection to the X server. </dd>

<dt><i>device_id</i> </dt>
<dd>Specifies the id of the device
to be opened </dd>

<dt><i>device</i> </dt>
<dd>Specifies the device to be closed </dd>
</dl>

<h2><a name='sect3' href='#toc3'>Description</a></h2>
The <i>XOpenDevice</i>
request makes an input device accessible to a client through input extension
protocol requests.  If successful, it returns a pointer to an <b>XDevice</b> structure.
<p>
The <i>XCloseDevice</i> request makes an input device inaccessible to a  client
through input extension protocol requests.  Before terminating, and client
that has opened input devices through the input extension should close
them via <i>CloseDevice</i>. <p>
When a client makes an <i>XCloseDevice</i> request, any active
grabs that the client has on the device are  released.  Any event selections
that the client has are deleted, as well as any passive grabs.  If the requesting
client is the last client accessing the device, the server may disable
all access by X to the device. <p>
<i>XOpenDevice</i> and <i>XCloseDevice</i> can generate
a <i>BadDevice</i>  error. 
<h2><a name='sect4' href='#toc4'>Structures</a></h2>
The <i>XDevice</i> structure returned by <i>XOpenDevice</i>
contains: <br>
<pre>typedef struct {
<tt>&#32;</tt>&nbsp;<tt>&#32;</tt>&nbsp;XID device_id;
<tt>&#32;</tt>&nbsp;<tt>&#32;</tt>&nbsp;int num_classes;
<tt>&#32;</tt>&nbsp;<tt>&#32;</tt>&nbsp;XInputClassInfo *classes;
} XDevice;
</pre><p>
The classes field is a pointer to an array of XInputClassInfo structures.
Each element of this array contains an event type base for a class of input
supported by the specified device.  The num_classes field indicates the
number of elements in the classes array. <p>
The <i>XInputClassInfo</i> structure contains:
<p>
<br>
<pre>typedef struct {
<tt>&#32;</tt>&nbsp;<tt>&#32;</tt>&nbsp;unsigned char input_class;
<tt>&#32;</tt>&nbsp;<tt>&#32;</tt>&nbsp;unsigned char event_type_base;
} XInputClassInfo;
</pre><p>
The input_class field identifies one class of input supported by the device.
 Defined types include <i>KeyClass</i>, <i>ButtonClass</i>, <i>ValuatorClass</i>, <i>ProximityClass</i>,
<i>FeedbackClass</i>, <i>FocusClass</i>, and <i>OtherClass</i>. The event_type_base identifies
the event type of the first event in that class. <p>
The information contained
in the <i>XInputClassInfo</i> structure is used by macros to obtain the event
classes that clients use in making <i>XSelectExtensionEvent</i> requests.  Currently
defined macros include <i>DeviceKeyPress</i>, <i>DeviceKeyRelease</i>, <i>DeviceButtonPress</i>,
 <i>DeviceButtonRelese</i>, <i>DeviceMotionNotify</i>, <i>DeviceFocusIn</i>,  <i>DeviceFocusOut</i>,
<i>ProximityIn</i>, <i>ProximityOut</i>,  <i>DeviceStateNotify</i>, <i>DeviceMappiingNotify</i>,  <i>ChangeDeviceNotify</i>,
<i>DevicePointerMotionHint</i>,  <i>DeviceButton1Motion</i>, <i>DeviceButton2Motion</i>, <i>DeviceButton3Motion</i>,
<i>DeviceButton4Motion</i>, <i>DeviceButton5Motion</i>, <i>DeviceButtonMotion</i>, <i>DeviceOwnerGrabButton</i>,
<i>DeviceButtonPressGrab</i>, and <i>NoExtensionEvent</i>. <p>
To obtain the proper event
class for a particular device, one of the above macros is invoked using
the <i>XDevice</i> structure for that device.  For example,  <p>
<br>
<pre>DeviceKeyPress (*device, type, eventclass);
</pre><p>
returns the <i>DeviceKeyPress</i> event type and the eventclass for  <i>DeviceKeyPress</i>
events from the specified device. <p>
This <i>eventclass</i> can then be used in an
<i>XSelectExtensionEvent</i>  request to ask the server to send <i>DeviceKeyPress</i>
events from this device.  When a selected event is received via <i>XNextEvent</i>,
the <i>type</i> can be  used for comparison with the type in the event. 
<h2><a name='sect5' href='#toc5'>Diagnostics</a></h2>

<dl>

<dt><i>BadDevice</i>
</dt>
<dd>An invalid device was specified.  The specified device does not exist, or
is the X keyboard or X pointer.  This error may also occur if some other
client has caused the specified device to become the X keyboard or X pointer
device via the <i>XChangeKeyboardDevice</i> or <i>XChangePointerDevice</i> requests. </dd>
</dl>

<h2><a name='sect6' href='#toc6'>See
Also</a></h2>
<br>
<i>Programming with Xlib</i> <p>

<hr><p>
<a name='toc'><b>Table of Contents</b></a><p>
<ul>
<li><a name='toc0' href='#sect0'>Name</a></li>
<li><a name='toc1' href='#sect1'>Syntax</a></li>
<li><a name='toc2' href='#sect2'>Arguments</a></li>
<li><a name='toc3' href='#sect3'>Description</a></li>
<li><a name='toc4' href='#sect4'>Structures</a></li>
<li><a name='toc5' href='#sect5'>Diagnostics</a></li>
<li><a name='toc6' href='#sect6'>See Also</a></li>
</ul>
</body>
</html>
