
<!--
  t
   Copyright \(co 1985, 1986, 1987, 1988, 1989, 1990, 1991, 1994, 1996 X Consortium
   
   Permission is hereby granted, free of charge, to any person obtaining
   a copy of this software and associated documentation files (the
   "Software"), to deal in the Software without restriction, including
   without limitation the rights to use, copy, modify, merge, publish,
   distribute, sublicense, and/or sell copies of the Software, and to
   permit persons to whom the Software is furnished to do so, subject to
   the following conditions:
   
   The above copyright notice and this permission notice shall be included
   in all copies or substantial portions of the Software.
   
   THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
   OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
   MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.
   IN NO EVENT SHALL THE X CONSORTIUM BE LIABLE FOR ANY CLAIM, DAMAGES OR
   OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE,
   ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
   OTHER DEALINGS IN THE SOFTWARE.
   
   Except as contained in this notice, the name of the X Consortium shall
   not be used in advertising or otherwise to promote the sale, use or
   other dealings in this Software without prior written authorization
   from the X Consortium.
   
   Copyright \(co 1985, 1986, 1987, 1988, 1989, 1990, 1991 by
   Digital Equipment Corporation
   
   Portions Copyright \(co 1990, 1991 by
   Tektronix, Inc.
   
   Permission to use, copy, modify and distribute this documentation for
   any purpose and without fee is hereby granted, provided that the above
   copyright notice appears in all copies and that both that copyright notice
   and this permission notice appear in all copies, and that the names of
   Digital and Tektronix not be used in in advertising or publicity pertaining
   to this documentation without specific, written prior permission.
   Digital and Tektronix makes no representations about the suitability
   of this documentation for any purpose.
   It is provided ``as is'' without express or implied warranty.
   
   $XFree86: xc/doc/man/X11/XCKCntrl.man,v 1.4 2003/04/28 22:17:54 herrb Exp $
   $XdotOrg: xc/doc/man/X11/XCKCntrl.man,v 1.2 2004/04/23 18:42:09 eich Exp $
   
 
-->

<!--
  Note End -- doug kraft 3/85
 
-->
 
<!--
  t
 
-->
<!-- manual page source format generated by PolyglotMan v3.0.8+X.Org, -->
<!-- available at http://polyglotman.sourceforge.net/ -->

<html>
<head>
<title>XChangeKeyboardControl(3X11) manual page</title>
</head>
<body bgcolor='#efefef' text='black' link='blue' vlink='#551A8B' alink='red'>
<a href='#toc'>Table of Contents</a><p>

<h2><a name='sect0' href='#toc0'>Name</a></h2>
XChangeKeyboardControl,
XGetKeyboardControl, XAutoRepeatOn, XAutoRepeatOff, XBell, XQueryKeymap,
XKeyboardControl - manipulate keyboard settings and keyboard control structure

<h2><a name='sect1' href='#toc1'>Syntax</a></h2>

<dl>

<dt>int XChangeKeyboardControl(Display *<i>display</i>, unsigned long </dt>
<dd><i>value_mask</i>,
XKeyBoardControl *<i>values</i>);  </dd>

<dt>int XGetKeyboardControl(Display *<i>display</i>, XKeyBoardState
</dt>
<dd>*<i>values_return</i>);  </dd>

<dt>int XAutoRepeatOn(Display *<i>display</i>);  </dt>
<dd></dd>

<dt>int XAutoRepeatOff(Display
*<i>display</i>);  </dt>
<dd></dd>

<dt>int XBell(Display *<i>display</i>, int <i>percent</i>);  </dt>
<dd></dd>

<dt>int XQueryKeymap(Display
*<i>display</i>, char <i>keys_return</i>[32]);  </dt>
<dd></dd>
</dl>

<h2><a name='sect2' href='#toc2'>Arguments</a></h2>

<dl>

<dt><i>display</i></dt>
<dd>Specifies the connection
to the X server. </dd>

<dt><i>keys_return</i></dt>
<dd>Returns an array of bytes that identifies which
keys are pressed down. Each bit represents one key of the keyboard. </dd>

<dt><i>percent</i></dt>
<dd>Specifies
the volume for the bell, which can range from -100 to 100 inclusive.  </dd>

<dt><i>value_mask</i></dt>
<dd>Specifies
which controls to change. This mask is the bitwise inclusive OR of the valid
control mask bits. </dd>

<dt><i>values</i></dt>
<dd>Specifies one value for each bit set to 1 in the
mask. </dd>

<dt><i>values_return</i></dt>
<dd>Returns the current keyboard controls in the specified
<i>XKeyboardState</i>   structure. </dd>
</dl>

<h2><a name='sect3' href='#toc3'>Description</a></h2>
The <i>XChangeKeyboardControl</i>   function
controls the keyboard characteristics defined by the <i>XKeyboardControl</i> 
 structure. The value_mask argument specifies which values are to be changed.
<p>
<i>XChangeKeyboardControl</i>   can generate <i>BadMatch</i>   and <i>BadValue</i>   errors.
<p>
The <i>XGetKeyboardControl</i>   function returns the current control values for
the keyboard to the <i>XKeyboardState</i>   structure. <p>
The <i>XAutoRepeatOn</i>   function
turns on auto-repeat for the keyboard on the specified display. <p>
The <i>XAutoRepeatOff</i>
  function turns off auto-repeat for the keyboard on the specified display.
<p>
The <i>XBell</i>   function rings the bell on the keyboard on the specified display,
if possible. The specified volume is relative to the base volume for the
keyboard. If the value for the percent argument is not in the range -100
to 100 inclusive, a <i>BadValue</i>   error results. The volume at which the bell
rings when the percent argument is nonnegative is: 
<dl>

<dt>base - [(base * percent)
/ 100] + percent </dt>
<dd></dd>
</dl>
<p>
The volume at which the bell rings when the percent argument
is negative is: 
<dl>

<dt>base + [(base * percent) / 100] </dt>
<dd></dd>
</dl>
<p>
To change the base volume
of the bell, use <i>XChangeKeyboardControl</i>.   <p>
<i>XBell</i>   can generate a <i>BadValue</i>
  error. <p>
The <i>XQueryKeymap</i>   function returns a bit vector for the logical
state of the keyboard,  where each bit set to 1 indicates that the corresponding
key is currently  pressed down. The vector is represented as 32 bytes. Byte
N (from 0) contains the bits for keys 8N to 8N + 7  with the least significant
bit in the byte representing key 8N. <p>
Note that the logical state of a device
(as seen by client applications) may lag the physical state if device event
processing is frozen. 
<h2><a name='sect4' href='#toc4'>Structures</a></h2>
The <i>XKeyboardControl</i>   structure contains:
<p>
<p>
/* Mask bits for ChangeKeyboardControl */ <table border='0'>
<tr><td align='left'>#define</td></tr>
<i>KBKeyClickPercent</i>   <tr><td align='left'>T}<tt>&#32;</tt>&nbsp;<tt>&#32;</tt>&nbsp;T{</td></tr>
<tr><td align='left'>(1L&lt;&lt;0)</td></tr>
<tr><td align='left'>T}</td></tr>
<tr><td align='left'>#define
</td></tr>
<i>KBBellPercent</i>   <tr><td align='left'>T}<tt>&#32;</tt>&nbsp;<tt>&#32;</tt>&nbsp;T{</td></tr>
<tr><td align='left'>(1L&lt;&lt;1)</td></tr>
<tr><td align='left'>T}</td></tr>
<tr><td align='left'>#define </td></tr>
<i>KBBellPitch</i>   <tr><td align='left'>T}<tt>&#32;</tt>&nbsp;<tt>&#32;</tt>&nbsp;T{</td></tr>
<tr><td align='left'>(1L&lt;&lt;2)</td></tr>
<tr><td align='left'>T}</td></tr>
<tr><td align='left'>#define </td></tr>
<i>KBBellDuration</i>
  <tr><td align='left'>T}<tt>&#32;</tt>&nbsp;<tt>&#32;</tt>&nbsp;T{</td></tr>
<tr><td align='left'>(1L&lt;&lt;3)</td></tr>
<tr><td align='left'>T}</td></tr>
<tr><td align='left'>#define </td></tr>
<i>KBLed</i>   <tr><td align='left'>T}<tt>&#32;</tt>&nbsp;<tt>&#32;</tt>&nbsp;T{</td></tr>
<tr><td align='left'>(1L&lt;&lt;4)</td></tr>
<tr><td align='left'>T}</td></tr>
<tr><td align='left'>#define </td></tr>
<i>KBLedMode</i>   <tr><td align='left'>T}<tt>&#32;</tt>&nbsp;<tt>&#32;</tt>&nbsp;T{</td></tr>
<tr><td align='left'>(1L&lt;&lt;5)</td></tr>
<tr><td align='left'>T}</td></tr>
<tr><td align='left'>#define
</td></tr>
<i>KBKey</i>   <tr><td align='left'>T}<tt>&#32;</tt>&nbsp;<tt>&#32;</tt>&nbsp;T{</td></tr>
<tr><td align='left'>(1L&lt;&lt;6)</td></tr>
<tr><td align='left'>T}</td></tr>
<tr><td align='left'>#define </td></tr>
<i>KBAutoRepeatMode</i>   <tr><td align='left'>T}<tt>&#32;</tt>&nbsp;<tt>&#32;</tt>&nbsp;T{</td></tr>
<tr><td align='left'>(1L&lt;&lt;7)</td></tr>
<tr><td align='left'>T}</td></tr>
</table>
  <br>
<pre>0
0>=40 .vs 0u
0<=39 .vs 0p
/* Values */
typedef struct {
<tt>&#32;</tt>&nbsp;<tt>&#32;</tt>&nbsp;int key_click_percent;
<tt>&#32;</tt>&nbsp;<tt>&#32;</tt>&nbsp;int bell_percent;
<tt>&#32;</tt>&nbsp;<tt>&#32;</tt>&nbsp;int bell_pitch;
<tt>&#32;</tt>&nbsp;<tt>&#32;</tt>&nbsp;int bell_duration;
<tt>&#32;</tt>&nbsp;<tt>&#32;</tt>&nbsp;int led;
<tt>&#32;</tt>&nbsp;<tt>&#32;</tt>&nbsp;int led_mode;<tt>&#32;</tt>&nbsp;<tt>&#32;</tt>&nbsp;/* LedModeOn, LedModeOff */
<tt>&#32;</tt>&nbsp;<tt>&#32;</tt>&nbsp;int key;
<tt>&#32;</tt>&nbsp;<tt>&#32;</tt>&nbsp;int auto_repeat_mode;<tt>&#32;</tt>&nbsp;<tt>&#32;</tt>&nbsp;/* AutoRepeatModeOff, AutoRepeatModeOn, 
                            <tt>&#32;</tt>&nbsp;<tt>&#32;</tt>&nbsp;AutoRepeatModeDefault */
} XKeyboardControl;

</pre> <p>
The key_click_percent member sets the volume for key clicks between 0
(off)  and 100 (loud) inclusive, if possible.   A setting of -1 restores
the default. Other negative values generate a <i>BadValue</i>   error. <p>
The bell_percent
sets the base volume for the bell between 0 (off) and 100 (loud) inclusive,
if possible.   A setting of -1 restores the default. Other negative values
generate a <i>BadValue</i>   error. The bell_pitch member sets the pitch (specified
in Hz) of the bell, if possible. A setting of -1 restores the default. Other
negative values generate a <i>BadValue</i>   error. The bell_duration member sets
the duration of the bell specified in milliseconds, if possible.   A setting
of -1 restores the default. Other negative values generate a <i>BadValue</i>   error.
<p>
If both the led_mode and led members are specified, the state of that LED
is changed, if possible.   The led_mode member can be set to <i>LedModeOn</i> 
 or <i>LedModeOff</i>.   If only led_mode is specified, the state of all LEDs are
changed, if possible.   At most 32 LEDs numbered from one are supported.
 No standard interpretation of LEDs is defined. If led is specified without
led_mode, a <i>BadMatch</i>   error results.  <p>
If both the auto_repeat_mode and
key members are specified,  the auto_repeat_mode of that key is changed
(according to <i>AutoRepeatModeOn</i>,   <i>AutoRepeatModeOff</i>,   or <i>AutoRepeatModeDefault</i>),
  if possible. If only auto_repeat_mode is specified, the global auto_repeat_mode
for the entire keyboard is changed, if possible, and does not affect the
per-key settings. If a key is specified without an auto_repeat_mode, a <i>BadMatch</i>
  error results. Each key has an individual mode of whether or not it should
auto-repeat and a default setting for the mode. In addition, there is a global
mode of whether auto-repeat should be enabled or not and a default setting
for that mode. When global mode is <i>AutoRepeatModeOn</i>,   keys should obey
their individual auto-repeat modes. When global mode is <i>AutoRepeatModeOff</i>,
  no keys should auto-repeat. An auto-repeating key generates alternating
<i>KeyPress</i>   and <i>KeyRelease</i>   events. When a key is used as a modifier, it
is desirable for the key not to auto-repeat, regardless of its auto-repeat
setting. <p>
The <i>XKeyboardState</i>   structure contains: <p>
<br>
<pre>0
0>=40 .vs 0u
0<=39 .vs 0p
typedef struct {
<tt>&#32;</tt>&nbsp;<tt>&#32;</tt>&nbsp;int key_click_percent;
<tt>&#32;</tt>&nbsp;<tt>&#32;</tt>&nbsp;int bell_percent;
<tt>&#32;</tt>&nbsp;<tt>&#32;</tt>&nbsp;unsigned int bell_pitch, bell_duration;
<tt>&#32;</tt>&nbsp;<tt>&#32;</tt>&nbsp;unsigned long led_mask;
<tt>&#32;</tt>&nbsp;<tt>&#32;</tt>&nbsp;int global_auto_repeat;
<tt>&#32;</tt>&nbsp;<tt>&#32;</tt>&nbsp;char auto_repeats[32];
} XKeyboardState;

</pre> <p>
For the LEDs,  the least significant bit of led_mask corresponds to LED
one, and each bit set to 1 in led_mask indicates an LED that is lit. The
global_auto_repeat member can be set to <i>AutoRepeatModeOn</i>   or <i>AutoRepeatModeOff</i>.
  The auto_repeats member is a bit vector. Each bit set to 1 indicates that
auto-repeat is enabled  for the corresponding key. The vector is represented
as 32 bytes.   Byte N (from 0) contains the bits for keys 8N to 8N + 7 with
the least significant bit in the byte representing key 8N. 
<h2><a name='sect5' href='#toc5'>Diagnostics</a></h2>

<dl>

<dt><i>BadMatch</i>
</dt>
<dd>  Some argument or pair of arguments has the correct type and range but
fails to match in some other way required by the request. </dd>

<dt><i>BadValue</i> </dt>
<dd>  Some
numeric value falls outside the range of values accepted by the request.
Unless a specific range is specified for an argument, the full range defined
by the argument's type is accepted.  Any argument defined as a set of alternatives
can generate this error. </dd>
</dl>

<h2><a name='sect6' href='#toc6'>See Also</a></h2>
<a href='XChangeKeyboardMapping.3.html'>XChangeKeyboardMapping(3X11)</a>
, <a href='XSetPointerMapping.3.html'>XSetPointerMapping(3X11)</a>

<br>
<i>Xlib - C Language X Interface</i> <p>

<hr><p>
<a name='toc'><b>Table of Contents</b></a><p>
<ul>
<li><a name='toc0' href='#sect0'>Name</a></li>
<li><a name='toc1' href='#sect1'>Syntax</a></li>
<li><a name='toc2' href='#sect2'>Arguments</a></li>
<li><a name='toc3' href='#sect3'>Description</a></li>
<li><a name='toc4' href='#sect4'>Structures</a></li>
<li><a name='toc5' href='#sect5'>Diagnostics</a></li>
<li><a name='toc6' href='#sect6'>See Also</a></li>
</ul>
</body>
</html>
