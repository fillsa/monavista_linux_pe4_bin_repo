
<!--
  t
   Copyright \(co 1985, 1986, 1987, 1988, 1989, 1990, 1991, 1994, 1996 X Consortium
   
   Permission is hereby granted, free of charge, to any person obtaining
   a copy of this software and associated documentation files (the
   "Software"), to deal in the Software without restriction, including
   without limitation the rights to use, copy, modify, merge, publish,
   distribute, sublicense, and/or sell copies of the Software, and to
   permit persons to whom the Software is furnished to do so, subject to
   the following conditions:
   
   The above copyright notice and this permission notice shall be included
   in all copies or substantial portions of the Software.
   
   THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
   OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
   MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.
   IN NO EVENT SHALL THE X CONSORTIUM BE LIABLE FOR ANY CLAIM, DAMAGES OR
   OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE,
   ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
   OTHER DEALINGS IN THE SOFTWARE.
   
   Except as contained in this notice, the name of the X Consortium shall
   not be used in advertising or otherwise to promote the sale, use or
   other dealings in this Software without prior written authorization
   from the X Consortium.
   
   Copyright \(co 1985, 1986, 1987, 1988, 1989, 1990, 1991 by
   Digital Equipment Corporation
   
   Portions Copyright \(co 1990, 1991 by
   Tektronix, Inc.
   
   Permission to use, copy, modify and distribute this documentation for
   any purpose and without fee is hereby granted, provided that the above
   copyright notice appears in all copies and that both that copyright notice
   and this permission notice appear in all copies, and that the names of
   Digital and Tektronix not be used in in advertising or publicity pertaining
   to this documentation without specific, written prior permission.
   Digital and Tektronix makes no representations about the suitability
   of this documentation for any purpose.
   It is provided ``as is'' without express or implied warranty.
   
   $XFree86: xc/doc/man/X11/XASCmap.man,v 1.5 2003/04/28 22:17:54 herrb Exp $
   $XdotOrg: xc/doc/man/X11/XASCmap.man,v 1.2 2004/04/23 18:42:09 eich Exp $
   
 
-->

<!--
  Note End -- doug kraft 3/85
 
-->
 
<!--
  t
 
-->
<!-- manual page source format generated by PolyglotMan v3.0.8+X.Org, -->
<!-- available at http://polyglotman.sourceforge.net/ -->

<html>
<head>
<title>XAllocStandardColormap(3X11) manual page</title>
</head>
<body bgcolor='#efefef' text='black' link='blue' vlink='#551A8B' alink='red'>
<a href='#toc'>Table of Contents</a><p>

<h2><a name='sect0' href='#toc0'>Name</a></h2>
XAllocStandardColormap,
XSetRGBColormaps, XGetRGBColormaps, XStandardColormap - allocate, set, or
read a standard colormap structure 
<h2><a name='sect1' href='#toc1'>Syntax</a></h2>

<dl>

<dt>XStandardColormap *XAllocStandardColormap(void);
</dt>
<dd></dd>

<dt>void XSetRGBColormaps(Display *<i>display</i>, Window <i>w</i>, </dt>
<dd>XStandardColormap *<i>std_colormap</i>,
int <i>count</i>, Atom <i>property</i>); </dd>

<dt>Status XGetRGBColormaps(Display *<i>display</i>, Window
<i>w</i>, </dt>
<dd>XStandardColormap **<i>std_colormap_return</i>, int *<i>count_return</i>, Atom <i>property</i>);
</dd>
</dl>

<h2><a name='sect2' href='#toc2'>Arguments</a></h2>

<dl>

<dt><i>display</i></dt>
<dd>Specifies the connection to the X server. </dd>

<dt><i>count</i></dt>
<dd>Specifies
the number of colormaps. </dd>

<dt><i>count_return</i></dt>
<dd>Returns the number of colormaps. </dd>

<dt><i>property</i></dt>
<dd>Specifies
the property name. </dd>

<dt><i>std_colormap</i></dt>
<dd>Specifies the <i>XStandardColormap</i>   structure
to be used. </dd>

<dt><i>std_colormap_return</i></dt>
<dd>Returns the <i>XStandardColormap</i>   structure.
</dd>
</dl>

<h2><a name='sect3' href='#toc3'>Description</a></h2>
The <i>XAllocStandardColormap</i>   function allocates and returns
a pointer to a <i>XStandardColormap</i>   structure. Note that all fields in the
<i>XStandardColormap</i>   structure are initially set to zero. If insufficient
memory is available,  <i>XAllocStandardColormap</i>   returns NULL. To free the
memory allocated to this structure, use <i>XFree</i>.   <p>
The  <i>XSetRGBColormaps</i> 
 function replaces the RGB colormap definition in the specified property
 on the named window. If the property does not already exist, <i>XSetRGBColormaps</i>
  sets the RGB colormap definition in the specified property on the named
window. The property is stored with a type of RGB_COLOR_MAP and a format
of 32. Note that it is the caller's responsibility to honor the ICCCM restriction
that only RGB_DEFAULT_MAP contain more than one definition. <p>
The <i>XSetRGBColormaps</i>
  function usually is only used by window or session managers. To create
a standard colormap,  follow this procedure: 
<dl>

<dt>1.</dt>
<dd>Open a new connection to
the same server. </dd>

<dt>2.</dt>
<dd>Grab the server. </dd>

<dt>3.</dt>
<dd>See if the property is on the property
list of the root window for the screen. </dd>

<dt>4.</dt>
<dd>If the desired property is not
present: <blockquote></li><li>Create a colormap (unless you are using the default colormap of
the screen). </li><li>Determine the color characteristics of the visual. </li><li>Allocate
cells in the colormap (or create it with <i>AllocAll</i>).   </li><li>Call  <i>XStoreColors</i>
  to store appropriate color values in the colormap. </li><li>Fill in the descriptive
members in the  <i>XStandardColormap</i>   structure. </li><li>Attach the property to the
root window. </li><li>Use <i>XSetCloseDownMode</i>   to make the resource permanent. </li>
</ul>
</blockquote>

<dl>

<dt>5.</dt>
<dd>Ungrab
the server. </dd>
</dl>
<p>
<i>XSetRGBColormaps</i>   can generate <i>BadAlloc</i>,   <i>BadAtom</i>,   and <i>BadWindow</i>
  errors. <p>
The  <i>XGetRGBColormaps</i>   function returns the RGB colormap definitions
stored  in the specified property on the named window. If the property exists,
is of type RGB_COLOR_MAP, is of format 32,  and is long enough to contain
a colormap definition, <i>XGetRGBColormaps</i>   allocates and fills in space
for the returned colormaps and returns a nonzero status. If the visualid
is not present,  <i>XGetRGBColormaps</i>   assumes the default visual for the
screen on which the window is located;  if the killid is not present, 
<i>None</i>   is assumed, which indicates that the resources cannot be released.
Otherwise,  none of the fields are set, and  <i>XGetRGBColormaps</i>   returns
a zero status. Note that it is the caller's responsibility to honor the ICCCM
restriction that only RGB_DEFAULT_MAP contain more than one definition.
<p>
<i>XGetRGBColormaps</i>   can generate <i>BadAtom</i>   and <i>BadWindow</i>   errors. 
<h2><a name='sect4' href='#toc4'>Structures</a></h2>
The
<i>XStandardColormap</i>   structure contains: <p>
/* Hints */ <table border='0'>
<tr><td align='left'>#define</td></tr>
<i>ReleaseByFreeingColormap</i>
  <tr><td align='left'>T}<tt>&#32;</tt>&nbsp;<tt>&#32;</tt>&nbsp;T{</td></tr>
<tr><td align='left'>( (XID) 1L);</td></tr>
<tr><td align='left'>T}</td></tr>
</table>
 /* Values */  <br>
<pre>0
0>=40 .vs 0u
0<=39 .vs 0p
typedef struct {
<tt>&#32;</tt>&nbsp;<tt>&#32;</tt>&nbsp;Colormap colormap;
<tt>&#32;</tt>&nbsp;<tt>&#32;</tt>&nbsp;unsigned long red_max;
<tt>&#32;</tt>&nbsp;<tt>&#32;</tt>&nbsp;unsigned long red_mult;
<tt>&#32;</tt>&nbsp;<tt>&#32;</tt>&nbsp;unsigned long green_max;
<tt>&#32;</tt>&nbsp;<tt>&#32;</tt>&nbsp;unsigned long green_mult;
<tt>&#32;</tt>&nbsp;<tt>&#32;</tt>&nbsp;unsigned long blue_max;
<tt>&#32;</tt>&nbsp;<tt>&#32;</tt>&nbsp;unsigned long blue_mult;
<tt>&#32;</tt>&nbsp;<tt>&#32;</tt>&nbsp;unsigned long base_pixel;
<tt>&#32;</tt>&nbsp;<tt>&#32;</tt>&nbsp;VisualID visualid;
<tt>&#32;</tt>&nbsp;<tt>&#32;</tt>&nbsp;XID killid;
} XStandardColormap;

</pre> <p>
The colormap member is the colormap created by the <i>XCreateColormap</i>   function.
The red_max, green_max, and blue_max members give the maximum red, green,
and blue values, respectively.   Each color coefficient ranges from zero
to its max, inclusive.   For example, a common colormap allocation is 3/3/2
(3 planes for red, 3 planes for green, and 2 planes for blue).   This colormap
would have red_max = 7, green_max = 7,  and blue_max = 3.   An alternate
allocation that uses only 216 colors is red_max = 5,  green_max = 5, and
blue_max = 5. <p>
The red_mult, green_mult, and blue_mult members give the scale
factors used to compose a full pixel value.  (See the discussion of the
base_pixel members for further information.); For a 3/3/2 allocation, red_mult
might be 32, green_mult might be 4, and blue_mult might be 1.   For a 6-colors-each
allocation, red_mult might be 36,  green_mult might be 6, and blue_mult
might be 1. <p>
The base_pixel member gives the base pixel value used to compose
a full pixel value.   Usually, the base_pixel is obtained from a call to
the  <i>XAllocColorPlanes</i>   function.   Given integer red, green, and blue
coefficients in their appropriate  ranges, one then can compute a corresponding
pixel value by using the following expression: <p>
<br>
<pre>0
0>=40 .vs 0u
0<=39 .vs 0p
(r * red_mult + g * green_mult + b * blue_mult + base_pixel) &amp; 0xFFFFFFFF

</pre> <p>
For  <i>GrayScale</i>   colormaps,  only the colormap, red_max, red_mult,  and
base_pixel members are defined.  The other members are ignored.   To compute
a  <i>GrayScale</i>   pixel value, use the following expression: <p>
<br>
<pre>0
0>=40 .vs 0u
0<=39 .vs 0p
(gray * red_mult + base_pixel) &amp; 0xFFFFFFFF

</pre> <p>
Negative multipliers can be represented by converting the 2's complement
representation of the multiplier into an unsigned long and storing the
result in the appropriate _mult field. The step of masking by 0xFFFFFFFF
effectively converts the resulting positive multiplier into a negative
one. The masking step will take place automatically on many machine architectures,
depending on the size of the integer type used to do the computation, <p>
The
visualid member gives the ID number of the visual from which the colormap
was created. The killid member gives a resource ID that indicates whether
the cells held by this standard colormap are to be released  by freeing
the colormap ID or by calling the <i>XKillClient</i>   function on the indicated
resource. (Note that this method is necessary for allocating out of an existing
colormap.); <p>
The properties containing the  <i>XStandardColormap</i>   information
have  the type RGB_COLOR_MAP. 
<h2><a name='sect5' href='#toc5'>Diagnostics</a></h2>

<dl>

<dt><i>BadAlloc</i> </dt>
<dd>  The server failed to
allocate the requested resource or server memory. </dd>

<dt><i>BadAtom</i> </dt>
<dd>  A value for
an Atom argument does not name a defined Atom. </dd>

<dt><i>BadWindow</i> </dt>
<dd>  A value for a
Window argument does not name a defined Window. </dd>
</dl>

<h2><a name='sect6' href='#toc6'>See Also</a></h2>
<a href='XAllocColor.3.html'>XAllocColor(3X11)</a>
,
<a href='XCreateColormap.3.html'>XCreateColormap(3X11)</a>
, <a href='XFree.3.html'>XFree(3X11)</a>
, <a href='XSetCloseDownMode.3.html'>XSetCloseDownMode(3X11)</a>
 <br>
<i>Xlib - C Language X Interface</i> <p>

<hr><p>
<a name='toc'><b>Table of Contents</b></a><p>
<ul>
<li><a name='toc0' href='#sect0'>Name</a></li>
<li><a name='toc1' href='#sect1'>Syntax</a></li>
<li><a name='toc2' href='#sect2'>Arguments</a></li>
<li><a name='toc3' href='#sect3'>Description</a></li>
<li><a name='toc4' href='#sect4'>Structures</a></li>
<li><a name='toc5' href='#sect5'>Diagnostics</a></li>
<li><a name='toc6' href='#sect6'>See Also</a></li>
</ul>
</body>
</html>
