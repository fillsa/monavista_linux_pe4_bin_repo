
<!--
  
   $XFree86: xc/doc/man/Xi/XQueryDv.man,v 1.2 2001/01/27 18:20:21 dawes Exp $
   
   
   Copyright ([\d,\s]*) by Hewlett-Packard Company, Ardent Computer, 
   
   Permission to use, copy, modify, distribute, and sell this documentation 
   for any purpose and without fee is hereby granted, provided that the above
   copyright notice and this permission notice appear in all copies.
   Ardent, and Hewlett-Packard make no representations about the 
   suitability for any purpose of the information in this document.  It is 
   provided \`\`as is'' without express or implied warranty.
   
   $Xorg: XQueryDv.man,v 1.3 2000/08/17 19:41:56 cpqbld Exp $
 
-->
<!-- manual page source format generated by PolyglotMan v3.0.8+X.Org, -->
<!-- available at http://polyglotman.sourceforge.net/ -->

<html>
<head>
<title>XQueryDeviceState(3X11) manual page</title>
</head>
<body bgcolor='#efefef' text='black' link='blue' vlink='#551A8B' alink='red'>
<a href='#toc'>Table of Contents</a><p>

<h2><a name='sect0' href='#toc0'>Name</a></h2>
XQueryDeviceState - query the state of an extension input
device. 
<h2><a name='sect1' href='#toc1'>Syntax</a></h2>

<dl>

<dt>int XQueryDeviceState(Display *<i>display</i>, XDevice *<i>device</i>);
 </dt>
<dd></dd>
</dl>

<h2><a name='sect2' href='#toc2'>Arguments</a></h2>

<dl>

<dt><i>display</i> </dt>
<dd>Specifies the connection to the X server. </dd>

<dt><i>device</i> </dt>
<dd>Specifies
the device whose state is to be queried. </dd>
</dl>

<h2><a name='sect3' href='#toc3'>Description</a></h2>
The <i>XQueryDeviceState</i>
request queries the state of an input device.  The current state of  keys
and buttons (up or down), and valuators (current value) on the device 
is reported by this request.  Each key or button is represented by a bit
in the <i>XDeviceState</i> structure that is returned.  Valuators on the  device
report 0 if they are reporting relative information, and the current value
if they are reporting absolute information. <p>
<i>XQueryDeviceState</i> can generate
a <i>BadDevice</i> error. 
<h2><a name='sect4' href='#toc4'>Structures</a></h2>
The <i>XDeviceState</i> structure contains: <p>
<br>
<pre>typedef struct {
<tt>&#32;</tt>&nbsp;<tt>&#32;</tt>&nbsp;XID device_id;
<tt>&#32;</tt>&nbsp;<tt>&#32;</tt>&nbsp;int num_classes;
<tt>&#32;</tt>&nbsp;<tt>&#32;</tt>&nbsp;XInputClass *data;
} XDeviceState;
</pre><p>
The <i>XValuatorState</i> structure contains: <p>
<br>
<pre>typedef struct {
<tt>&#32;</tt>&nbsp;<tt>&#32;</tt>&nbsp;unsigned char class;
<tt>&#32;</tt>&nbsp;<tt>&#32;</tt>&nbsp;unsigned char length;
<tt>&#32;</tt>&nbsp;<tt>&#32;</tt>&nbsp;unsigned char num_valuators;
<tt>&#32;</tt>&nbsp;<tt>&#32;</tt>&nbsp;unsigned char mode;
<tt>&#32;</tt>&nbsp;<tt>&#32;</tt>&nbsp;int *valuators;
} XValuatorState;
</pre><p>
The <i>XKeyState</i> structure contains: <p>
<br>
<pre>typedef struct {
<tt>&#32;</tt>&nbsp;<tt>&#32;</tt>&nbsp;unsigned char class;
<tt>&#32;</tt>&nbsp;<tt>&#32;</tt>&nbsp;unsigned char length;
<tt>&#32;</tt>&nbsp;<tt>&#32;</tt>&nbsp;short         num_keys;
<tt>&#32;</tt>&nbsp;<tt>&#32;</tt>&nbsp;char keys[32];
} XKeyState;
</pre><p>
The <i>XButtonState</i> structure contains: <p>
<br>
<pre>typedef struct {
<tt>&#32;</tt>&nbsp;<tt>&#32;</tt>&nbsp;unsigned char class;
<tt>&#32;</tt>&nbsp;<tt>&#32;</tt>&nbsp;unsigned char length;
<tt>&#32;</tt>&nbsp;<tt>&#32;</tt>&nbsp;short         num_buttons;
<tt>&#32;</tt>&nbsp;<tt>&#32;</tt>&nbsp;char buttons[32];
} XButtonState;
</pre>
<h2><a name='sect5' href='#toc5'>Diagnostics</a></h2>

<dl>

<dt><i>BadDevice</i> </dt>
<dd>An invalid device was specified.  The specified device
does not exist or has  not been opened by this client via <i>XOpenInputDevice</i>.
 This error may also occur if some other client has caused the specified
device to become the X keyboard or X pointer device via the <i>XChangeKeyboardDevice</i>
or <i>XChangePointerDevice</i> requests. </dd>
</dl>

<h2><a name='sect6' href='#toc6'>See Also</a></h2>
<br>
<i>Programming with Xlib</i> <p>

<hr><p>
<a name='toc'><b>Table of Contents</b></a><p>
<ul>
<li><a name='toc0' href='#sect0'>Name</a></li>
<li><a name='toc1' href='#sect1'>Syntax</a></li>
<li><a name='toc2' href='#sect2'>Arguments</a></li>
<li><a name='toc3' href='#sect3'>Description</a></li>
<li><a name='toc4' href='#sect4'>Structures</a></li>
<li><a name='toc5' href='#sect5'>Diagnostics</a></li>
<li><a name='toc6' href='#sect6'>See Also</a></li>
</ul>
</body>
</html>
