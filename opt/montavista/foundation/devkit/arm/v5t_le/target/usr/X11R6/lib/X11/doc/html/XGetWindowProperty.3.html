
<!--
  Copyright \(co 1985, 1986, 1987, 1988, 1989, 1990, 1991, 1994, 1996 X Consortium
   
   Permission is hereby granted, free of charge, to any person obtaining
   a copy of this software and associated documentation files (the
   "Software"), to deal in the Software without restriction, including
   without limitation the rights to use, copy, modify, merge, publish,
   distribute, sublicense, and/or sell copies of the Software, and to
   permit persons to whom the Software is furnished to do so, subject to
   the following conditions:
   
   The above copyright notice and this permission notice shall be included
   in all copies or substantial portions of the Software.
   
   THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
   OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
   MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.
   IN NO EVENT SHALL THE X CONSORTIUM BE LIABLE FOR ANY CLAIM, DAMAGES OR
   OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE,
   ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
   OTHER DEALINGS IN THE SOFTWARE.
   
   Except as contained in this notice, the name of the X Consortium shall
   not be used in advertising or otherwise to promote the sale, use or
   other dealings in this Software without prior written authorization
   from the X Consortium.
   
   Copyright \(co 1985, 1986, 1987, 1988, 1989, 1990, 1991 by
   Digital Equipment Corporation
   
   Portions Copyright \(co 1990, 1991 by
   Tektronix, Inc.
   
   Permission to use, copy, modify and distribute this documentation for
   any purpose and without fee is hereby granted, provided that the above
   copyright notice appears in all copies and that both that copyright notice
   and this permission notice appear in all copies, and that the names of
   Digital and Tektronix not be used in in advertising or publicity pertaining
   to this documentation without specific, written prior permission.
   Digital and Tektronix makes no representations about the suitability
   of this documentation for any purpose.
   It is provided ``as is'' without express or implied warranty.
   
   $XFree86: xc/doc/man/X11/XGetWProp.man,v 1.2 2001/01/27 18:19:59 dawes Exp $
   
 
-->

<!--
  Note End -- doug kraft 3/85
 
-->
<!-- manual page source format generated by PolyglotMan v3.0.8+X.Org, -->
<!-- available at http://polyglotman.sourceforge.net/ -->

<html>
<head>
<title>XGetWindowProperty(3X11) manual page</title>
</head>
<body bgcolor='#efefef' text='black' link='blue' vlink='#551A8B' alink='red'>
<a href='#toc'>Table of Contents</a><p>

<h2><a name='sect0' href='#toc0'>Name</a></h2>
XGetWindowProperty, XListProperties,
XChangeProperty, XRotateWindowProperties, XDeleteProperty - obtain and change
window properties 
<h2><a name='sect1' href='#toc1'>Syntax</a></h2>

<dl>

<dt>int XGetWindowProperty(Display *<i>display</i>, Window
<i>w</i>, Atom </dt>
<dd><i>property</i>, long <i>long_offset</i>, long <i>long_length</i>, Bool <i>delete</i>, Atom
<i>req_type</i>, Atom *<i>actual_type_return</i>, int *<i>actual_format_return</i>, unsigned
long *<i>nitems_return</i>, unsigned long *<i>bytes_after_return</i>, unsigned char **<i>prop_return</i>);
 </dd>

<dt>Atom *XListProperties(Display *<i>display</i>, Window <i>w</i>, int </dt>
<dd>*<i>num_prop_return</i>);
 </dd>

<dt>int XChangeProperty(Display *<i>display</i>, Window <i>w</i>, Atom </dt>
<dd><i>property</i>, Atom <i>type</i>,
int <i>format</i>, int <i>mode</i>, unsigned char *<i>data</i>, int <i>nelements</i>);  </dd>

<dt>int XRotateWindowProperties(Display
*<i>display</i>, Window <i>w</i>, </dt>
<dd>Atom <i>properties</i>[], int <i>num_prop</i>, int <i>npositions</i>); 
</dd>

<dt>int XDeleteProperty(Display *<i>display</i>, Window <i>w</i>, Atom </dt>
<dd><i>property</i>);  </dd>
</dl>

<h2><a name='sect2' href='#toc2'>Arguments</a></h2>

<dl>

<dt><i>actual_format_return</i></dt>
<dd>Returns
the actual format of the property. </dd>

<dt><i>actual_type_return</i></dt>
<dd>Returns the atom identifier
 that defines the actual type of the property. </dd>

<dt><i>bytes_after_return</i></dt>
<dd>Returns
the number of bytes remaining to be read in the property if  a partial
read was performed. </dd>

<dt><i>data</i></dt>
<dd>Specifies the property data. </dd>

<dt><i>delete</i></dt>
<dd>Specifies a Boolean
value that determines whether the property is deleted. </dd>

<dt><i>display</i></dt>
<dd>Specifies
the connection to the X server. </dd>

<dt><i>format</i></dt>
<dd>Specifies whether the data should
be viewed as a list of 8-bit, 16-bit, or 32-bit quantities. Possible values
are 8, 16, and 32. This information allows the X server to correctly perform
byte-swap operations as necessary. If the format is 16-bit or 32-bit, you must
explicitly cast your data pointer to an (unsigned char *) in the call to
 <i>XChangeProperty</i>.   </dd>

<dt><i>long_length</i></dt>
<dd>Specifies the length in 32-bit multiples of
the data to be retrieved. </dd>

<dt><i>long_offset</i></dt>
<dd>Specifies the offset in the specified
property (in 32-bit quantities)  where the data is to be retrieved. 
<!--
  Changed name of this file to prop_mode.a on 1/13/87
 
-->
</dd>

<dt><i>mode</i></dt>
<dd>Specifies
the mode of the operation. You can pass <i>PropModeReplace</i>,   <i>PropModePrepend</i>,
  or <i>PropModeAppend</i>.   </dd>

<dt><i>nelements</i></dt>
<dd>Specifies the number of elements of the
specified data format. </dd>

<dt><i>nitems_return</i></dt>
<dd>Returns the actual number of 8-bit, 16-bit,
or 32-bit items  stored in the prop_return data. </dd>

<dt><i>num_prop</i></dt>
<dd>Specifies the length
of the properties array. </dd>

<dt><i>num_prop_return</i></dt>
<dd>Returns the length of the properties
array. </dd>

<dt><i>npositions</i></dt>
<dd>Specifies the rotation amount. </dd>

<dt><i>prop_return</i></dt>
<dd>Returns the data
in the specified format. </dd>

<dt><i>property</i></dt>
<dd>Specifies the property name. </dd>

<dt><i>properties</i></dt>
<dd>Specifies
the array of properties that are to be rotated. </dd>

<dt><i>req_type</i></dt>
<dd>Specifies the atom
identifier associated with the property type or <i>AnyPropertyType</i>.   </dd>

<dt><i>type</i></dt>
<dd>Specifies
the type of the property. The X server does not interpret the type but simply
passes it back to an application that later calls  <i>XGetWindowProperty</i>. 
 </dd>

<dt><i>w</i></dt>
<dd>Specifies the window whose property you want to obtain, change, rotate
or delete. </dd>
</dl>

<h2><a name='sect3' href='#toc3'>Description</a></h2>
The <i>XGetWindowProperty</i>   function returns the actual
type of the property; the actual format of the property; the number of
8-bit, 16-bit, or 32-bit items transferred; the number of bytes remaining
to be read in the property; and a pointer to the data actually returned.
<i>XGetWindowProperty</i>   sets the return arguments as follows: 
<ul>
<li>If the specified
property does not exist for the specified window, <i>XGetWindowProperty</i>  
returns  <i>None</i>   to actual_type_return and the value zero to  actual_format_return
and bytes_after_return. The nitems_return argument is empty. In this case,
the delete argument is ignored. </li><li>If the specified property exists  but its
type does not match the specified type, <i>XGetWindowProperty</i>   returns the
actual property type to actual_type_return,  the actual property format
(never zero) to actual_format_return,  and the property length in bytes
(even if the actual_format_return is 16 or 32)  to bytes_after_return. It
also ignores the delete argument. The nitems_return argument is empty. </li><li>If
the specified property exists and either you assign  <i>AnyPropertyType</i>  
to the req_type argument or the specified type matches the actual property
type, <i>XGetWindowProperty</i>   returns the actual property type to actual_type_return
and the actual property format (never zero) to actual_format_return.  It
also returns a value to bytes_after_return and nitems_return, by  defining
the following values: <br>
<pre>





</pre></dd>

<dt><tt>&#32;</tt>&nbsp;<tt>&#32;</tt>&nbsp;N = actual length of the stored property in bytes<tt>&#32;</tt>&nbsp;<tt>&#32;</tt>&nbsp;     (even if the format
is 16 or 32)<tt>&#32;</tt>&nbsp;<tt>&#32;</tt>&nbsp;I = 4 * long_offset<tt>&#32;</tt>&nbsp;<tt>&#32;</tt>&nbsp;T = N - I<tt>&#32;</tt>&nbsp;<tt>&#32;</tt>&nbsp;L = MINIMUM(T, 4 * long_length)<tt>&#32;</tt>&nbsp;<tt>&#32;</tt>&nbsp;A
= N - (I + L)</dt>
<dd>The returned value starts at byte index I in the property (indexing
from zero), and its length in bytes is L. If the value for long_offset causes
L to be negative, a <i>BadValue</i>   error results.  The value of bytes_after_return
is A,  giving the number of trailing unread bytes in the stored property.
</dd>
</dl>
<p>
If the returned format is 8, the returned data is represented as a <i>char</i>
  array. If the returned format is 16, the returned data is represented
as a <i>short</i>   array and should be cast to that type to obtain the elements.
If the returned format is 32, the returned data is represented as a <i>long</i>
  array and should be cast to that type to obtain the elements. <p>
<i>XGetWindowProperty</i>
  always allocates one extra byte in prop_return  (even if the property
is zero length)  and sets it to zero so that simple properties consisting
of characters do not have to be copied into yet another string before use.
<p>
If delete is  <i>True</i>   and bytes_after_return is zero,  <i>XGetWindowProperty</i>
  deletes the property  from the window and generates a  <i>PropertyNotify</i>
  event on the window. <p>
The function returns <i>Success</i>   if it executes successfully.
To free the resulting data, use <i>XFree</i>.   <p>
<i>XGetWindowProperty</i>   can generate
<i>BadAtom</i>,   <i>BadValue</i>,   and <i>BadWindow</i>   errors. <p>
The <i>XListProperties</i>   function
returns a pointer to an array of atom properties that are defined for 
the specified window or returns NULL if no properties were found. To free
the memory allocated by this function, use <i>XFree</i>.   <p>
<i>XListProperties</i>   can
generate a <i>BadWindow</i>   error. <p>
The <i>XChangeProperty</i>   function alters the
property for the specified window and causes the X server to generate a
<i>PropertyNotify</i>   event on that window. <i>XChangeProperty</i>   performs the following:

<ul>
<li>If mode is <i>PropModeReplace</i>,   <i>XChangeProperty</i>   discards the previous property
value and stores the new data. </li><li>If mode is <i>PropModePrepend</i>   or <i>PropModeAppend</i>,
  <i>XChangeProperty</i>   inserts the specified data before the beginning of
the existing data or onto the end of the existing data, respectively. The
type and format must match the existing property value, or a <i>BadMatch</i> 
 error results. If the property is undefined,  it is treated as defined
with the correct type and format with zero-length data. </li>
</ul>
<p>
If the specified
format is 8, the property data must be a <i>char</i>   array. If the specified
format is 16, the property data must be a <i>short</i>   array. If the specified
format is 32, the property data must be a <i>long</i>   array. <p>
The lifetime of
a property is not tied to the storing client. Properties remain until explicitly
deleted, until the window is destroyed, or until the server resets. For
a discussion of what happens when the connection to the X server is closed,
see section 2.6.  The maximum size of a property is server dependent and
can vary dynamically depending on the amount of memory the server has available.
(If there is insufficient space, a <i>BadAlloc</i>   error results.) <p>
<i>XChangeProperty</i>
  can generate <i>BadAlloc</i>,   <i>BadAtom</i>,   <i>BadMatch</i>,   <i>BadValue</i>,   and <i>BadWindow</i>
  errors. <p>
The <i>XRotateWindowProperties</i>   function allows you to rotate properties
on a window and causes the X server to generate <i>PropertyNotify</i>   events.
If the property names in the properties array are viewed as being numbered
 starting from zero and if there are num_prop property names in the list,
then the value associated with property name I becomes the value associated
 with property name (I + npositions) mod N for all I from zero to N - 1.
The effect is to rotate the states by npositions places around the virtual
ring of property names (right for positive npositions,  left for negative
npositions). If npositions mod N is nonzero, the X server generates a <i>PropertyNotify</i>
  event for each property in the order that they are listed in the array.
If an atom occurs more than once in the list or no property with that 
name is defined for the window, a  <i>BadMatch</i>   error results. If a  <i>BadAtom</i>
  or  <i>BadMatch</i>   error results, no properties are changed. <p>
<i>XRotateWindowProperties</i>
  can generate <i>BadAtom</i>,   <i>BadMatch</i>,   and <i>BadWindow</i>   errors. <p>
The <i>XDeleteProperty</i>
  function deletes the specified property only if the property was defined
on the specified window and causes the X server to generate a <i>PropertyNotify</i>
  event on the window unless the property does not exist. <p>
<i>XDeleteProperty</i>
  can generate <i>BadAtom</i>   and <i>BadWindow</i>   errors. 
<h2><a name='sect4' href='#toc4'>Diagnostics</a></h2>

<dl>

<dt><i>BadAlloc</i> </dt>
<dd>  The
server failed to allocate the requested resource or server memory. </dd>

<dt><i>BadAtom</i>
</dt>
<dd>  A value for an Atom argument does not name a defined Atom. </dd>

<dt><i>BadValue</i> </dt>
<dd> 
Some numeric value falls outside the range of values accepted by the request.
Unless a specific range is specified for an argument, the full range defined
by the argument's type is accepted.  Any argument defined as a set of alternatives
can generate this error. </dd>

<dt><i>BadWindow</i> </dt>
<dd>  A value for a Window argument does
not name a defined Window. </dd>
</dl>

<h2><a name='sect5' href='#toc5'>See Also</a></h2>
<a href='XFree.3.html'>XFree(3X11)</a>
, <a href='XInternAtom.3.html'>XInternAtom(3X11)</a>
 <br>
<i>Xlib - C Language X Interface</i> <p>

<hr><p>
<a name='toc'><b>Table of Contents</b></a><p>
<ul>
<li><a name='toc0' href='#sect0'>Name</a></li>
<li><a name='toc1' href='#sect1'>Syntax</a></li>
<li><a name='toc2' href='#sect2'>Arguments</a></li>
<li><a name='toc3' href='#sect3'>Description</a></li>
<li><a name='toc4' href='#sect4'>Diagnostics</a></li>
<li><a name='toc5' href='#sect5'>See Also</a></li>
</ul>
</body>
</html>
