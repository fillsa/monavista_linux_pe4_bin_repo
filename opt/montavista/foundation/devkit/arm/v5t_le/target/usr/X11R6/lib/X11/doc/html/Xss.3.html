
<!--
  
   $XFree86: xc/lib/Xss/Xss.man,v 1.1 2003/10/26 19:00:24 herrb Exp $
   $XdotOrg: xc/lib/Xss/Xss.man,v 1.2 2004/04/23 18:43:51 eich Exp $
   
   Copyright (C) 2003 The XFree86 Project, Inc.  All Rights Reserved.
   
   Permission is hereby granted, free of charge, to any person obtaining
   a copy of this software and associated documentation files (the
   "Software"), to deal in the Software without restriction, including
   without limitation the rights to use, copy, modify, merge, publish,
   distribute, sublicense, and/or sell copies of the Software, and to
   permit persons to whom the Software is furnished to do so, subject to
   the following conditions:
   
   The above copyright notice and this permission notice shall be
   included in all copies or substantial portions of the Software.
   
   THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
   EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
   MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT.
   IN NO EVENT SHALL THE XFREE86 PROJECT BE LIABLE FOR ANY CLAIM, DAMAGES
   OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
   OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR
   THE USE OR OTHER DEALINGS IN THE SOFTWARE.
   
   Except as contained in this notice, the name of the XFree86 Project
   shall not be used in advertising or otherwise to promote the sale, use
   or other dealings in this Software without prior written authorization
   from the XFree86 Project.
   
 
-->
<!-- manual page source format generated by PolyglotMan v3.0.8+X.Org, -->
<!-- available at http://polyglotman.sourceforge.net/ -->

<html>
<head>
<title>XScreenSaver(3x) manual page</title>
</head>
<body bgcolor='#efefef' text='black' link='blue' vlink='#551A8B' alink='red'>
<a href='#toc'>Table of Contents</a><p>

<h2><a name='sect0' href='#toc0'>Name</a></h2>
XScreenSaver - X11 Screen Saver extension
client library 
<h2><a name='sect1' href='#toc1'>Synopsis</a></h2>
<b>#include &lt;X11/extension/scrnsaver.h&gt;</b> <p>
<br>
<pre>typedef struct {
    Window window;                /* screen saver window */
    int state;                    /* ScreenSaver{Off,On,Disabled} */
    int kind;                     /* ScreenSaver{Blanked,Internal,External}
*/
    unsigned long til_or_since;   /* milliseconds */
    unsigned long idle;           /* milliseconds */
    unsigned long event_mask;     /* events */

} XScreenSaverInfo;
typedef struct {
    int type;               /* of event */
    unsigned long serial;   /* # of last request processed by server */
    Bool send_event;        /* true if this came frome a SendEvent request
*/
    Display *display;       /* Display the event was read from */
    Window window;          /* screen saver window */
    Window root;            /* root window of event screen */
    int state;              /* ScreenSaver{Off,On,Cycle} */
    int kind;               /* ScreenSaver{Blanked,Internal,External} */
    Bool forced;            /* extents of new region */
    Time time;              /* event timestamp */

} XScreenSaverNotifyEvent;
</pre>
<dl>

<dt>Bool XScreenSaverQueryExtension(Display *<i>dpy</i>, </dt>
<dd>int *<i>event_basep</i>, int *<i>error_basep</i>);
</dd>

<dt>Status XScreenSaverQueryVersion(Display *<i>dpy</i>, int *<i>major_versionp</i>, </dt>
<dd>int
*<i>minor_versionp</i>); </dd>

<dt>XScreenSaverInfo *XScreenSaverAllocInfo(void); </dt>
<dd></dd>

<dt>Status
XScreenSaverQueryInfo(Display *<i>dpy</i>, Drawable <i>drawable</i>, </dt>
<dd>XScreenSaverInfo
*<i>saver_info</i>); </dd>

<dt>void XScreenSaverSelectInput(Display *<i>dpy</i>, Drawable <i>drawable</i>,
</dt>
<dd>unsigned long <i>mask); </dd>

<dt>void XScreenSaverSetAttributes(Display *<i>dpy</i></i>, Drawable
<i>drawable</i>, </dt>
<dd>int <i>x</i>, int <i>y</i>, unsigned int <i>width</i>, unsigned int <i>height</i>, unsigned
int <i>border_width</i>, int <i>depth</i>, unsigned int <i>class</i>, Visual *<i>visual</i>, unsigned
long <i>valuemask</i>, XSetWindowAttributes *<i>attributes</i>); </dd>

<dt>void XScreenSaverUnsetAttributes(Display
*<i>dpy</i>, </dt>
<dd>Drawable <i>drawable</i>); </dd>

<dt>void XScreenSaverSaverRegister(Display *<i>dpy</i>,
int <i>screen</i>, </dt>
<dd>XID <i>xid</i>, Atom <i>type</i>); </dd>

<dt>Status XScreenSaverUnregister(Display
*<i>dpy</i>, int <i>screen</i>); </dt>
<dd></dd>

<dt>Status XScreenSaverGetRegistered(Display *<i>dpy</i>, int <i>screen</i>,
</dt>
<dd>XID *<i>xid</i>, Atom *<i>type</i>); </dd>
</dl>
<p>

<h2><a name='sect2' href='#toc2'>Description</a></h2>
The X Window System provides support
for changing the image on a display screen after a user-settable period
of inactivity to avoid burning the cathode ray tube phosphors. However,
no interfaces are provided for the user to control the image that is drawn.
This extension allows an external ``screen saver'' client to detect when the
alternate image is to be displayed and to provide the graphics. <p>
Current
X server implementations typically provide at least one form of ``screen
saver'' image. Historically, this has been a copy of the X logo drawn against
the root background pattern. However, many users have asked for the mechanism
to allow them to write screen saver programs that provide capabilities
similar to those provided by other window systems. In particular, such users
often wish to be able to display corporate logos, instructions on how to
reactivate the screen, and automatic screen-locking utilities. This extension
provides a means for writing such clients. 
<h3><a name='sect3' href='#toc3'>Assumptions</a></h3>
This extension exports
the notion of a special screen saver window that is mapped above all other
windows on a display. This window has the <i>override-redirect</i> attribute set
so that it is not subject to manipulation by the window manager. Furthermore,
the X identifier for the window is never returned by <b>QueryTree</b> requests
on the root window, so it is typically not visible to other clients. <p>
<b>XScreenSaverQueryExtension</b>
returns <b>True</b> if the <i>XScreenSaver</i> extension is available on the given display.
A client must call <b>XScreenSaverQueryExtension</b> before calling any other
XScreenSaver function in order to negotiate a compatible protocol version;
otherwise the client will get undefined behavior (XScreenSaver may or may
not work). <p>
If the extension is supported, the event number for <i>ScreenSaverNotify</i>
events is returned in the value pointed to by <i>event_base</i>. Since no additional
errors are defined by this extension, the results of <i>error_base</i> are not
defined. <p>
<b>XScreenSaverQueryVersion</b> returns <b>True</b> if the request succeeded;
the values of the major and minor protocol versions supported by the server
are returned in <i>major_versionp</i> and <i>minor_versionp</i> . <p>
<b>XScreenSaverAllocInfo</b>
allocates and returns an <b>XScreenSaverInfo</b> structure for use in calls to
<b>XScreenSaverQueryInfo</b>. All fields in the structure are initialized to zero.
If insufficient memory is available, NULL is returned. The results of this
routine can be released using <i>XFree</i>. <p>
<b>XScreenSaverQueryInfo</b> returns information
about the current state of the screen server in <i>saver_info</i> and a non-zero
value is returned. If the extension is not supported, <i>saver_info</i> is not
changed and 0 is returned. <br>
The <i>state</i> field specifies whether or not the screen saver is currently
active and how the <i>til-or-since</i> value should be interpreted: 
<dl>

<dt><i>Off</i> </dt>
<dd>The screen
is not currently being saved; <i>til-or-since</i> specifies the number of milliseconds
until the screen saver is expected to activate. </dd>

<dt><i>On</i> </dt>
<dd>The screen is currently
being saved; <i>til-or-since</i> specifies the number of milliseconds since the
screen saver activated. </dd>

<dt><i>Disabled</i> </dt>
<dd>The screen saver is currently disabled;
<i>til-or-since</i> is zero. <br>
The <i>kind</i> field specifies the mechanism that either is currently being used
or would have been were the screen being saved: </dd>

<dt><i>Blanked</i> </dt>
<dd>The video signal
to the display monitor was disabled. </dd>

<dt><i>Internal</i> </dt>
<dd>A server-dependent, built-in
screen saver image was displayed; either no client had set the screen saver
window attributes or a different client had the server grabbed when the
screen saver activated. </dd>

<dt><i>External</i> </dt>
<dd>The screen saver window was mapped with
attributes set by a client using the <b>ScreenSaverSetAttributes</b> request. </dd>
</dl>
<p>
The
<i>idle</i> field specifies the number of milliseconds since the last input was
received from the user on any of the input devices. <br>
The <i>event-mask</i> field specifies which, if any, screen saver events this client
has requested using <b>ScreenSaverSelectInput</b>. <p>
<b>XScreenSaverSelectInput</b> asks
that events related to the screen saver be generated for this client. If
no bits are set in <i>event-mask</i>, then no events will be generated. Otherwise,
any combination of the following bits may be set: 
<dl>

<dt><b>ScreenSaverNotify</b> </dt>
<dd>If
this bit is set, <b>ScreenSaverNotify</b> events are generated whenever the screen
saver is activated or deactivated. </dd>

<dt><b>ScreenSaverCycle</b> </dt>
<dd>If this bit is set,
<b>ScreenSaverNotify</b> events are generated whenever the screen saver cycle
interval passes. </dd>
</dl>
<p>
<b>XScreenSaverSetAttributes</b> sets the attributes to be used
the next time the external screen saver is activated. If another client
currently has the attributes set, a BadAccess error is generated and the
request is ignored. <br>
Otherwise, the specified window attributes are checked as if they were
used in a core <b>CreateWindow</b> request whose parent is the root. The <i>override-redirect</i>
field is ignored as it is implicitly set to True. If the window attributes
result in an error according to the rules for <b>CreateWindow</b>, the request
is ignored. <br>
Otherwise, the attributes are stored and will take effect on the next activation
that occurs when the server is not grabbed by another client. Any resources
specified for the <i>background-pixmap</i> or <i>cursor</i> attributes may be freed immediately.
The server is free to copy the <i>background-pixmap</i> or <i>cursor</i> resources or
to use them in place; therefore, the effect of changing the contents of
those resources is undefined. If the specified <i>colormap</i> no longer exists
when the screen saver activates, the parent's colormap is used instead. If
no errors are generated by this request, any previous screen saver window
attributes set by this client are released. <br>
When the screen saver next activates and the server is not grabbed by another
client, the screen saver window is created, if necessary, and set to the
specified attributes and events are generated as usual. The colormap associated
with the screen saver window is installed. Finally, the screen saver window
is mapped. <br>
The window remains mapped and at the top of the stacking order until the
screen saver is deactivated in response to activity on any of the user
input devices, a <b>ForceScreenSaver</b> request with a value of Reset, or any
request that would cause the window to be unmapped. <br>
If the screen saver activates while the server is grabbed by another client,
the internal saver mechanism is used. The <b>ForceScreenSaver</b> request may be
used with a value of Active to deactivate the internal saver and activate
the external saver. <br>
If the screen saver client's connection to the server is broken while the
screen saver is activated and the client's close down mode has not been
RetainPermanent or RetainTemporary, the current screen saver is deactivated
and the internal screen saver is immediately activated. <br>
When the screen saver deactivates, the screen saver window's colormap is
uninstalled and the window is unmapped (except as described below). The
screen saver XID is disassociated with the window and the server may, but
is not required to, destroy the window along with any children. <br>
When the screen saver is being deactivated and then immediately reactivated
(such as when switching screen savers), the server may leave the screen
saver window mapped (typically to avoid generating exposures). <p>
<b>XScreenSaverUnsetAttributes</b>
instructs the server to discard any previous screen saver window attributes
set by this client. <p>
<b>XScreenSaverRegister</b> stores the given <i>XID</i> in the <b>_SCREEN_SAVER_ID</b>
property (of the given <i>type</i>) on the root window of the specified <i>screen</i>.
It returns zero if an error is encountered and the property is not changed,
otherwise it returns non-zero. <p>
<b>XScreenSaverUnregister</b> removes any <b>_SCREEN_SAVER_ID</b>
from the root window of the specified <i>screen</i>. It returns zero if an error
is encountered and the property is changed, otherwise it returns non-zero.
<p>
<b>XScreenSaverGetRegistered</b> returns the <i>XID</i> and <i>type</i> stored in the <b>_SCREEN_SAVER_ID</b>
property on the root window of the specified <i>screen</i>. It returns zero if
an error is encountered or if the property does not exist or is not of
the correct format; otherwise it returns non-zero. 
<h2><a name='sect4' href='#toc4'>Errors</a></h2>
<b>XScreenSaverSelectInput,</b>
<b>XScreenSaverQueryInfo,</b> <b>XScreenSaverSetAttributes </b> and <b>XScreenSaverUnsetAttributes
</b> will generate a <i>BadDrawable</i> error if <i>drawable</i> is not a valid drawable
identifier. If any undefined bits are set in <i>event-mask</i>, a BadValue error
is generated by  <b>XScreenSaverSelectInput .</b> <p>

<h2><a name='sect5' href='#toc5'>See Also</a></h2>
<a href='X.7.html'>X(7)</a>
 
<h2><a name='sect6' href='#toc6'>Authors</a></h2>
Jim Fulton
and Keith Packard. 
<h2><a name='sect7' href='#toc7'>Stability</a></h2>
This API is considered as experimental. The Xss
library major revision may be incremented whenever incompatible changes
are done to the API without notice. Use with care. <p>

<hr><p>
<a name='toc'><b>Table of Contents</b></a><p>
<ul>
<li><a name='toc0' href='#sect0'>Name</a></li>
<li><a name='toc1' href='#sect1'>Synopsis</a></li>
<li><a name='toc2' href='#sect2'>Description</a></li>
<ul>
<li><a name='toc3' href='#sect3'>Assumptions</a></li>
</ul>
<li><a name='toc4' href='#sect4'>Errors</a></li>
<li><a name='toc5' href='#sect5'>See Also</a></li>
<li><a name='toc6' href='#sect6'>Authors</a></li>
<li><a name='toc7' href='#sect7'>Stability</a></li>
</ul>
</body>
</html>
