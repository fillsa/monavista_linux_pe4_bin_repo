
<!--
  -*- coding: us-ascii -*-
 
-->
<!-- manual page source format generated by PolyglotMan v3.0.8+X.Org, -->
<!-- available at http://polyglotman.sourceforge.net/ -->

<html>
<head>
<title>Xprint(7) manual page</title>
</head>
<body bgcolor='#efefef' text='black' link='blue' vlink='#551A8B' alink='red'>
<a href='#toc'>Table of Contents</a><p>

<h2><a name='sect0' href='#toc0'>Name</a></h2>
Xprint - The "X print service" - a portable, network-transparent printing
system based on the X11 protocol 
<h2><a name='sect1' href='#toc1'>Synopsis</a></h2>
Xprint is a very flexible, extensible,
scaleable, client/server print system based on ISO 10175 (and some other
specs) and the X11  rendering protocol.  Using Xprint an application can
search, query and use devices like  printers, FAX machines or create documents
in formats like PDF.  In particular, an application can seek a printer,
query supported  attributes (like paper size, trays, fonts etc.), configure
the printer  device to match itcqs needs and print on it like on any other
X device  reusing parts of the code which is used for the video card Xserver.
 
<h2><a name='sect2' href='#toc2'>Overview</a></h2>
The "X Print Service" technology allows X rendering to devices
such as printers and fax. Most of the service is available in the X11 technology
stack as Xp, with the remainder in single toolkit stacks (e.g. DtPrint for
CDE). Modifications have also been made to the LessTif/Motif/Qt technology
stacks to support Xprint. <p>
The Xp portion consists of: 
<ul>
<li>Xp Extension for the
X-Server (included in the X-Server Xprt) </li><li>Xp Extension API for the client
side (libXp/libXprintUtils) </li><li>PCL ddx driver that converts core X to native
PCL </li><li>PDF ddx driver that converts core X to native PDF </li><li>PostScript ddx driver
that converts core X to native PostScript </li><li>Raster ddx driver that generates
xwd rasters which can be converted to PCL, PDF or PostScript rasters </li>
</ul>
<p>
<p>
From
an X clients perspective, it can attach to one of two nearly identical
X-Servers, a "Video" X-Server, and a "Print" X-Server which has the additional
Xp capability but otherwise looks and behaves the same.  
<h2><a name='sect3' href='#toc3'>How the X Print
Service Works</a></h2>
The X Print Service expands on the traditional X-Server and
Xlib world in four ways. 
<ol>
.<li>Most obvious is the use of "print ddx drivers"
instead of "video ddx drivers". While a video ddx driver modifies pixels
in a video frame buffer, a print ddx driver generates "page description
language (PDL)" output (such as PCL, PDF or PostScript) or sends the print
rendering instructions to a platform-specific print API (like Win32/GDI).

<p> Once a print ddx driver generates PDL output, it can be sent to a spooler
such as <a href='lp.1.html'><b>lp</b>(1)</a>
 or retrieved by the client (to implement functionality like
"print-to-file"). 
<p> Though not currently done, a single X-Server can support
both print and video ddx drivers. </li>.<li>Since printers support "paged" output,
unlike video, a portion of the Xp Extension supports APIs to delineate
printed output. For example, XpStartPage and XpEndPage tell the X-Server
where a physical page starts and ends in an otherwise continuous stream
of X rendering primitives. Likewise, XpStartJob and XpEndJob determine when
a collection of pages starts and ends. XpEndJob typically causes the generated
PDL to be submitted to a spooler, such as <a href='lp.1.html'><b>lp</b>(1)</a>
. </li>.<li>Since printers have extensive
capabilities, another portion of the Xp Extension supports APIs to manipulate
"print contexts". 
<p> Once a printer is selected using the Xp Extension API,
a print context to represent it can be created. A print context embodies
the printer selected - it contains the printer's default capabilities, selectable
range of capabilities, printer state, and generated output. Some "attributes"
within the print context can be modified by the user, and the X-Server and
print ddx driver will react accordingly. For example, the attribute "content-orientation"
can be set to "landscape" or "portrait" (if the printer supports these
 values - which can be queried using the Xprint API as well). </li>.<li>Since printers
can have "built in" fonts, the Xp Extension in the X-Server works with the
print ddx drivers to make available (for printing only) additional fonts
on a per print context basis. 
<p> When a print context is created and set for
a given printer, the X font calls may be able to access additional printer
fonts. To do this (typically), the X-Server must have access to "printer
metric files" (.pmf) that describe at minimum the metrics of the built in
fonts. </li>
</ol>
<p>

<h2><a name='sect4' href='#toc4'>Usage</a></h2>
There are three tasks to start the X Print Service: 
<ol>
.<li>configuring
the X Print Server, </li>.<li>starting the X Print Service </li>.<li>configuring the user session
so that clients can find the running X Print Service </li>
</ol>
<p>
<p>
The tasks are described
in detail below. 
<h2><a name='sect5' href='#toc5'>Server Configuration</a></h2>
The X Print Server (Xprt) can read
a number of configuration files which control its behavior and support
for printers. Each vendor platform has a default location for this information.
Xprt can also read the environment variable <b>XPCONFIGDIR</b> to locate alternate
configuration directories. Common settings include: 
<p> export XPCONFIGDIR=/X11/lib/X11/XpConfig/
<p>
export XPCONFIGDIR=/proj/x11/xc/programs/Xserver/XpConfig/ 
<p> <p>
Xprt has many
built-in defaults, and lacking any configuration files, will immediately
try to support all printers visible via <a href='lpstat.1.html'><b>lpstat</b>(1)</a>
. <p>
In order of importance
for configuration by a system administrator, the configuration files for
a "C" locale are as follows (see <a href='Xprt.7.html'><b>Xprt</b>(7)</a>
 for more details (including support
for non-"C" locales)): 
<dl>

<dt><b>${XPCONFIGDIR}/C/print/Xprinters</b> </dt>
<dd>'Xprinters' is the
top most configuration file. It tells Xprt which specific printer names
(e.g. mylaser) should be supported, and whether <a href='lpstat.1.html'><b>lpstat</b>(1)</a>
 or other commands
should be used to automatically supplement the list of printers. </dd>

<dt><b>${XPCONFIGDIR}/C/print/attributes/printer</b>
</dt>
<dd>The 'printer' file maps printer names to model configurations (see 'model-config'
below). For example, "mylaser" could be mapped to a "HPDJ1600C", and all
other arbitrary printers could be mapped to a default, such as "HPLJ4SI".
When depending on <a href='lpstat.1.html'><b>lpstat</b>(1)</a>
 in the Xprinters file, setting up defaults
in 'printer' becomes all the more important. </dd>

<dt><b>${XPCONFIGDIR}/C/print/attributes/document</b>
</dt>
<dd>The 'document' file specifies the initial document values for any print jobs.
For example, which paper tray to use, what default resolution, etc. </dd>

<dt><b>${XPCONFIGDIR}/C/print/attributes/job</b>
</dt>
<dd>The 'job' file specifies the initial job values for any print jobs. For example,
"notification-profile" can be set so that when a print job is successfully
sent to a printer, e-mail is sent to the user. </dd>

<dt><b>${XPCONFIGDIR}/C/print/models/PSdefault/model-config</b>,
<b>${XPCONFIGDIR}/C/print/models/PSdefault/fonts/fonts.dir</b>, <b>${XPCONFIGDIR}/C/print/models/PSdefault/fonts/9nb00051.pmf</b>,
<b>${XPCONFIGDIR}/C/print/models/PSdefault/fonts/9nb00093.pmf</b> </dt>
<dd>The 'model-config'
file has attributes that describe the printer modelcqs capabilities and
default settings. Printer model fonts may also be present. The model-config
file also identifies the print ddx driver to be used. For each printer model
supported, a complete hierarchy of files should exist. In most cases, these
files do not need to be modified. </dd>

<dt><b>${XPCONFIGDIR}/C/print/ddx-config/raster/pcl</b>,
<b>${XPCONFIGDIR}/C/print/ddx-config/raster/pdf</b>, <b>${XPCONFIGDIR}/C/print/ddx-config/raster/postscript</b>
</dt>
<dd>The print ddx drivers can have highly specific configuration files to control
their behavior. In most cases, these files do not need to be modified. </dd>
</dl>
<p>
More
information in how to configure and customize the X print server can be
found in the <a href='Xprt.7.html'><b>Xprt</b>(7)</a>
 manual page. 
<h2><a name='sect6' href='#toc6'>Starting Up</a></h2>
The summary checklist for starting
the X Print Service is as follows: 
<ol>
.<li>Choose an execution model for the X
Print Service. The X Print Service can be run on a per-user session basis,
per machine basis, or can be run on a few machines globally available to
a number of users. </li>.<li>If print jobs are to be submitted to a spooler (almost
always the case), make sure all needed printers are available to the spooler
subsystem (most often <a href='lp.1.html'><b>lp</b>(1)</a>
) on the same machine running the X Print Service.
</li>.<li>Configure the X Print Server. See ``X Print Server Configuration''. </li>.<li>Depending
on #1, start the X Print Server process "Xprt", and then the toolkit-specific
Print Dialog Manager Daemon process (such as CDEnext's "dtpdmd") at the
appropriate times. Note that libXprintUtils-based applications/toolkits do
not need a Print Dialog Manager Daemon process to use Xprint. </li>
</ol>
<p>
The details
are described below. <p>
Because the X Print Service is based on X, it can be
easily distributed. The most significant factors in which execution model
to choose will be driven by: 
<ul>
<li>how many printers will be accessable through
the printer subsystem on any given machine. A system administrator may choose
to cluster printers on a few given machines, or scatter them across an
organization and possibly make extensive use of remote spoolers to make
them globally available. </li><li>how many machines will need a copy of the X Print
Server configuration files. The files have been architected so that one
super-set version of them can be maintained and distributed (e.g. via NFS),
and a per-machine or per-user version of the `Xprinters' is all that is needed
to have the appropriate information in them utilized or ignored. </li><li>how many
users can demand services from a given X Print Service. </li>
</ul>
<p>
With the above in
mind, some obvious execution models include: 
<ul>
<li>Global - in this model, the
system administrator is choosing to run the X Print Service on a *few*
select machines with appropriate printers configured, and allow clients
access to the global resource. This can centralize the administration of
printers and configuration files, but may have to be monitored for performance
loading. 
<p> Startup would likely be done by boot-up scripts (such as <b>/etc/init.d/xprint</b>).
</li><li>Per-machine - every machine with potential X Print Service users would run
the service. Printer and configuration file administration is decentralized,
and usage would be limited to the users on the machine. 
<p> Startup would likely
be done by boot-up scripts (such as <b>/etc/init.d/xprint</b>). </li><li>Per-user session -
every user would run an entire X Print Service for themselves. In the future,
the Video X Server normally started may contain Print X Server capability,
so this model becomes very natural. 
<p> Startup would likely be done at session
login or by launching actions or processes manually once the user logs
in. Note: Deamons like "dtpdmd" must be started after Xprt. </li>
</ul>
<p>
<p>
Starting of the
processes is straight forward. In strict order (example is for manually
starting the X print server for CDEnext usage): 
<ol>
.<li>
<p> <br>
<pre>[machineA] % Xprt [-XpFile &lt;Xprinters file&gt;] [:dispNum] &amp;
</pre>
<p>
<p> 
<p> Note that Xprt will look for configuration files in either a default
location or where <b>XPCONFIGDIR</b> points. 
<p> <b>-XpFile</b> specifies an alternate `Xprinters'
file, rather than the default one or `<b>${XPCONFIGDIR}/C/print/Xprinters</b>'. </li>.
<li>
<p> <br>
<pre>[machineA] % dtpdmd -d machineA[:dispNum] [-l /tmp/dtpdmd.log] &amp;
</pre>
<p>
<p> 
<p> The dtpdmd will maintain an X-Selection on the X-Server, and will start
dtpdm's as required to service requests. </li>
</ol>
<p>
<p>
In all but the per-user session model,
the machine running the dtpdmd (thus dtpdm's) will need display authorization
to the users video display. 
<h2><a name='sect7' href='#toc7'>Client Configuration</a></h2>
Once a X Print Server and
dtpdmd have been started -- many of them in some cases -- clients will need
to find and use them. There are two mechanisms that allow clients to discover
X Print Servers and printers. 
<ul>
<li>"X Print Specifier" - assuming usage of the
DtPrint/XprintUtils-based print applications, the following notation is
understood: 
<p> 
<p> <br>
<pre>printer_name@machine[:dispNum]
</pre>
<p>
<p> 
<p> For example: 
<p> 
<p> <br>
<pre>colorlj7@printhub:2
</pre>
<p>
<p> 
<p> In the above example, the X Print Server running at `printhub:2' is assumed
to support the printer named `colorlj7'. </li><li><b>${XPSERVERLIST}</b> - assuming usage of
the DtPrint print dialogs, the environment variable <b>${XPSERVERLIST}</b> can
contain a list of X Print Servers. For example: 
<p> 
<p> <br>
<pre>XPSERVERLIST="printhub:2 printhub:3 otherdept:0"
</pre>
<p>
<p> 
<p> Then in the dialogs, only a printer name needs to be entered. The dialog
will then search the X Print Servers in <b>${XPSERVERLIST}</b> for a server than
supports the printer, and then establish contact. </li>
</ul>
<p>

<h2><a name='sect8' href='#toc8'>End-user Sequence</a></h2>
From most
CDEnext applications, printing is accomplished by bringing down the &lt;File&gt;
menu and selecting &lt;Print...&gt;. This will result in the DtPrintSetupBox dialog,
which will request the name of a printer, and offer limited capability
to configure print options (e.g. number of copies). If the user wishes, they
can select &lt;Setup...&gt;, which will start a dtpdm capable of modifying additional
print options. Finally, the user should select &lt;Print&gt;. 
<h2><a name='sect9' href='#toc9'>Environment</a></h2>

<dl>

<dt><b>${XPCONFIGDIR}</b>
</dt>
<dd>This environment variable points to the root of the Xprint server configuration
directory hierarchy. If the variable is not defined, the default path is
be assumed. The default path may be <b>/usr/X11R6/lib/X11/xserver/</b>,  <b>/usr/lib/X11/xserver/</b>,
<b>/usr/share/Xprint/xserver/</b> or <b>/usr/openwin/server/etc/XpConfig</b>, depending
on the system, and may be configured in <b>/etc/init.d/xprint</b>. </dd>

<dt><b>${LANG}</b> </dt>
<dd>This
environment variable selects the locale settings used by the Xprint server.
Xprt allows language-specific settings (stored in <b>${XPCONFIGDIR}/${LANG}/print/</b>)
which will override the default settings (stored in <b>${XPCONFIGDIR}/C/print/</b>).
If <b>${LANG}</b> is not set "C" is assumed. </dd>

<dt><b>${XPSERVERLIST}</b> </dt>
<dd>The environment variable
<b>${XPSERVERLIST}</b> contains a list of display identifiers (separated by whitespace)
which tell an application where it can find the Xprint servers. Usually
<b>${XPSERVERLIST}</b> is set by the profile startup scripts (e.g. <b>/etc/profile</b>
or <b>/etc/profile.d/xprint.sh</b>) using the output of <b>/etc/init.d/xprint get_xpserverlist</b>.

<p> Example:  
<p> <br>
<pre><tt>&#32;</tt>&nbsp;<tt>&#32;</tt>&nbsp;<tt>&#32;</tt>&nbsp;<tt>&#32;</tt>&nbsp;export XPSERVERLIST="`/etc/init.d/xprint get_xpserverlist`"
</pre>
<p>
<p> 
<p> Alternatively <b>${XPSERVERLIST}</b> can be set manually. Example: 
<p> <br>
<pre><tt>&#32;</tt>&nbsp;<tt>&#32;</tt>&nbsp;<tt>&#32;</tt>&nbsp;<tt>&#32;</tt>&nbsp;export XPSERVERLIST="littlecat:80 bitdog:72"
</pre>
<p> instructs an application to find an Xprint server at display 80 on the
machine "littlecat" and at display 72 on the machine bigdog. </dd>

<dt><b>${XPRINTER}</b>
 </dt>
<dd>The environment variable <b>${XPRINTER}</b> defines the default printer used
by print applications. The syntax is either <i>printername</i> or <i>printername</i>@<i>display</i>.

<p> Examples: <blockquote></dd>

<dt><b>XPRINTER=ps003</b> </dt>
<dd>tells an application to look for the first printer
named "ps003" on all Xprint servers. </dd>

<dt><b>XPRINTER=hplaser19@littlecat:80</b> </dt>
<dd>tells
an application to use the printer "hplaser19" on the Xprint server at display
 "littlecat:80". </dd>
</dl>
</blockquote>

<p> 
<p> If <b>${XPRINTER}</b> is not set the applications will examine
the values of the <b>${PDPRINTER}</b>, <b>${LPDEST}</b>, and  <b>${PRINTER}</b> environment
variables (in that order).  
<h2><a name='sect10' href='#toc10'>See Also</a></h2>
<a href='X11.7.html'><b>X11</b>(7)</a>
, <a href='xplsprinters.7.html'><b>xplsprinters</b>(7)</a>
, <a href='xprehashprinterlist.7.html'><b>xprehashprinterlist</b>(7)</a>
,
<a href='xphelloworld.7.html'><b>xphelloworld</b>(7)</a>
, <a href='xpxmhelloworld.7.html'><b>xpxmhelloworld</b>(7)</a>
, <a href='xpawhelloworld.7.html'><b>xpawhelloworld</b>(7)</a>
, <a href='xpxthelloworld.7.html'><b>xpxthelloworld</b>(7)</a>
,
<a href='xpsimplehelloworld.7.html'><b>xpsimplehelloworld</b>(7)</a>
, <a href='Xserver.7.html'><b>Xserver</b>(7)</a>
, <a href='Xprt.7.html'><b>Xprt</b>(7)</a>
, <a href='libXp.3.html'><b>libXp</b>(3x)</a>
, <a href='libXprintUtils.3.html'><b>libXprintUtils</b>(3x)</a>
,
<a href='libXprintAppUtils.3.html'><b>libXprintAppUtils</b>(3x)</a>
, <a href='XmPrintShell.3.html'><b>XmPrintShell</b>(3x)</a>
, <a href='XawPrintShell.3.html'><b>XawPrintShell</b>(3x)</a>
, Xprint FAQ
(http://xprint.mozdev.org/docs/Xprint_FAQ.html), Xprint main site (http://xprint.mozdev.org/)

<h2><a name='sect11' href='#toc11'>Authors</a></h2>
This manual page was written by  Roland Mainz &lt;roland.mainz@nrubsig.org&gt;
based on the original X11R6.6 <b>xc/programs/Xserver/XpConfig/README</b>. <p>

<hr><p>
<a name='toc'><b>Table of Contents</b></a><p>
<ul>
<li><a name='toc0' href='#sect0'>Name</a></li>
<li><a name='toc1' href='#sect1'>Synopsis</a></li>
<li><a name='toc2' href='#sect2'>Overview</a></li>
<li><a name='toc3' href='#sect3'>How the X Print Service Works</a></li>
<li><a name='toc4' href='#sect4'>Usage</a></li>
<li><a name='toc5' href='#sect5'>Server Configuration</a></li>
<li><a name='toc6' href='#sect6'>Starting Up</a></li>
<li><a name='toc7' href='#sect7'>Client Configuration</a></li>
<li><a name='toc8' href='#sect8'>End-user Sequence</a></li>
<li><a name='toc9' href='#sect9'>Environment</a></li>
<li><a name='toc10' href='#sect10'>See Also</a></li>
<li><a name='toc11' href='#sect11'>Authors</a></li>
</ul>
</body>
</html>
