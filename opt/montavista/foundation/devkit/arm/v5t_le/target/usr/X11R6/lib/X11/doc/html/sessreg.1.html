
<!--
  $Xorg: sessreg.man,v 1.4 2001/02/09 02:05:40 xorgcvs Exp $
   Copyright 1994, 1998  The Open Group
   
   Permission to use, copy, modify, distribute, and sell this software and its
   documentation for any purpose is hereby granted without fee, provided that
   the above copyright notice appear in all copies and that both that
   copyright notice and this permission notice appear in supporting
   documentation.
   
   The above copyright notice and this permission notice shall be included
   in all copies or substantial portions of the Software.
   
   THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
   OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
   MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.
   IN NO EVENT SHALL THE OPEN GROUP BE LIABLE FOR ANY CLAIM, DAMAGES OR
   OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE,
   ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
   OTHER DEALINGS IN THE SOFTWARE.
   
   Except as contained in this notice, the name of The Open Group shall
   not be used in advertising or otherwise to promote the sale, use or
   other dealings in this Software without prior written authorization
   from The Open Group.
   
   $XFree86: xc/programs/xdm/sessreg.man,v 1.7 2001/04/23 20:31:09 dawes Exp $
   
 
-->
<!-- manual page source format generated by PolyglotMan v3.0.8+X.Org, -->
<!-- available at http://polyglotman.sourceforge.net/ -->

<html>
<head>
<title>SESSREG(1) manual page</title>
</head>
<body bgcolor='#efefef' text='black' link='blue' vlink='#551A8B' alink='red'>
<a href='#toc'>Table of Contents</a><p>

<h2><a name='sect0' href='#toc0'>Name</a></h2>
sessreg - manage utmp/wtmp entries for non-init
clients 
<h2><a name='sect1' href='#toc1'>Synopsis</a></h2>
<b>sessreg</b> [-w <i>wtmp-file</i>] [-u <i>utmp-file</i>] [-l <i>line-name</i>] [-h <i>host-name</i>]
[-s <i>slot-number</i>] [-x <i>Xservers-file</i>] [-t <i>ttys-file</i>] [-a] [-d] <i>user-name</i> 
<h2><a name='sect2' href='#toc2'>Description</a></h2>
<p>
<i>Sessreg</i>
is a simple program for managing utmp/wtmp entries for xdm sessions. <p>
System
V has a better interface to /etc/utmp than BSD; it dynamically allocates
entries in the file, instead of writing them at fixed positions indexed
by position in /etc/ttys. <p>
To manage BSD-style utmp files, <i>sessreg</i> has two
strategies.  In conjunction with xdm, the -x option counts the number of
lines in /etc/ttys and then adds to that the number of the line in the
Xservers file which specifies the display.  The display name must be specified
as the "line-name" using the -l option.  This sum is used as the "slot-number"
in /etc/utmp that this entry will be written at.  In the more general case,
the -s option specifies the slot-number directly.  If for some strange reason
your system uses a file other that /etc/ttys to manage init, the -t option
can direct <i>sessreg</i> to look elsewhere for a count of terminal sessions. <p>
Conversely,
System V managers will not ever need to use these options (-x, -s and -t).
 To make the program easier to document and explain, <i>sessreg</i> accepts the
BSD-specific flags in the System V environment and ignores them. <p>
BSD and
Linux also have a host-name field in the utmp file which doesn't exist in
System V.  This option is also ignored by the System V version of <i>sessreg</i>.

<h2><a name='sect3' href='#toc3'>Usage</a></h2>
<p>
In Xstartup, place a call like: <br>
<pre>       sessreg -a -l $DISPLAY -x /usr/X11R6/lib/xdm/Xservers $USER
</pre>and in Xreset: <br>
<pre>       sessreg -d -l $DISPLAY -x /usr/X11R6/lib/xdm/Xservers $USER
</pre>
<h2><a name='sect4' href='#toc4'>Options</a></h2>

<dl>

<dt><b>-w</b> <i>wtmp-file</i></dt>
<dd>This specifies an alternate wtmp file, instead of /usr/adm/wtmp
for BSD or /etc/wtmp for sysV.  The special name "none" disables writing
records to /usr/adm/wtmp. </dd>

<dt><b>-u</b> <i>utmp-file</i></dt>
<dd>This specifies an alternate utmp file,
instead of "/etc/utmp".  The special name "none" disables writing records
to /etc/utmp. </dd>

<dt><b>-l</b> <i>line-name</i></dt>
<dd>This describes the "line" name of the entry.  For
terminal sessions, this is the final pathname segment of the terminal device
filename (e.g. ttyd0).  For X sessions, it should probably be the local display
name given to the users session (e.g. :0).  If none is specified, the terminal
name will be determined with <a href='ttyname.3.html'>ttyname(3)</a>
 and stripped of leading components.
</dd>

<dt><b>-h</b> <i>host-name</i></dt>
<dd>This is set for BSD hosts to indicate that the session was initiated
from a remote host.  In typical xdm usage, this options is not used. </dd>

<dt><b>-s</b> <i>slot-number</i></dt>
<dd>Each
potential session has a unique slot number in BSD systems, most are identified
by the position of the <i>line-name</i> in the /etc/ttys file. This option overrides
the default position determined with <a href='ttyslot.3.html'>ttyslot(3)</a>
. This option is inappropriate
for use with xdm, the -x option is more useful. </dd>

<dt><b>-x</b> <i>Xservers-file</i></dt>
<dd>As X sessions
are one-per-display, and each display is entered in this file, this options
sets the <i>slot-number</i> to be the number of lines in the <i>ttys-file</i> plus the
index into this file that the <i>line-name</i> is found. </dd>

<dt><b>-t</b> <i>ttys-file</i></dt>
<dd>This specifies
an alternate file which the <i>-x</i> option will use to count the number of terminal
sessions on a host. </dd>

<dt><b>-a</b></dt>
<dd>This session should be added to utmp/wtmp. </dd>

<dt><b>-d</b></dt>
<dd>This session
should be deleted from utmp/wtmp.  One of -a/-d must be specified. </dd>
</dl>

<h2><a name='sect5' href='#toc5'>See Also</a></h2>
<a href='xdm.1.html'>xdm(1)</a>


<h2><a name='sect6' href='#toc6'>Author</a></h2>
Keith Packard, MIT X Consortium <p>

<hr><p>
<a name='toc'><b>Table of Contents</b></a><p>
<ul>
<li><a name='toc0' href='#sect0'>Name</a></li>
<li><a name='toc1' href='#sect1'>Synopsis</a></li>
<li><a name='toc2' href='#sect2'>Description</a></li>
<li><a name='toc3' href='#sect3'>Usage</a></li>
<li><a name='toc4' href='#sect4'>Options</a></li>
<li><a name='toc5' href='#sect5'>See Also</a></li>
<li><a name='toc6' href='#sect6'>Author</a></li>
</ul>
</body>
</html>
